(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SpeechControl"],{"3e0d":function(e,t,n){"use strict";n("4b55")},"4b55":function(e,t,n){},7275:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),l=Object(o["O"])("data-v-698f4998");Object(o["w"])("data-v-698f4998");var i={class:"pb15"},a=Object(o["j"])("div",{class:"pb10"},"捕获模式：",-1),s={class:"flex justify-content-center"},c={class:"mr10"},d=Object(o["i"])(" 自由捕获"),r={class:"mr10"},u=Object(o["i"])(" 鼠标按住"),p={class:"mr10"},m=Object(o["i"])(" 鼠标移入"),b={class:"mr10"},h=Object(o["i"])(" 按住空格"),j={class:"mr10"},g=Object(o["i"])(" 禁止捕获"),f={class:"pb10"},v={class:"pb10"},y={class:"flex justify-content-center pb10"},O={class:"mr10"},S=Object(o["i"])(" 常用语句"),k={class:"mr10"},C=Object(o["i"])(" 临时语句"),x={class:"mr10"},T=Object(o["i"])(" 立刻发送"),w={class:"p-inputgroup"},V={class:"tl"},F=Object(o["j"])("div",null,"常用语句：",-1),I={class:"tl"},z=Object(o["j"])("div",null,"临时语句：",-1);Object(o["u"])();var D=l((function(e,t,n,D,B,M){var L=Object(o["B"])("RadioButton"),U=Object(o["B"])("Button"),E=Object(o["B"])("Divider"),A=Object(o["B"])("InputText"),J=Object(o["B"])("Panel");return Object(o["t"])(),Object(o["g"])("main",null,[Object(o["j"])(J,{header:"语音获取",class:"mb15"},{default:l((function(){return[Object(o["j"])("div",i,[a,Object(o["j"])("div",s,[Object(o["j"])("div",c,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"getType",value:"1",modelValue:B.getType,"onUpdate:modelValue":t[1]||(t[1]=function(e){return B.getType=e}),disabled:B.mouseDownFlag,onChange:M.getTypeChange},null,8,["modelValue","disabled","onChange"]),d])]),Object(o["j"])("div",r,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"getType",value:"2",modelValue:B.getType,"onUpdate:modelValue":t[2]||(t[2]=function(e){return B.getType=e}),disabled:B.mouseDownFlag,onChange:M.getTypeChange},null,8,["modelValue","disabled","onChange"]),u])]),Object(o["j"])("div",p,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"getType",value:"3",modelValue:B.getType,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.getType=e}),disabled:B.mouseDownFlag,onChange:M.getTypeChange},null,8,["modelValue","disabled","onChange"]),m])]),Object(o["j"])("div",b,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"getType",value:"4",modelValue:B.getType,"onUpdate:modelValue":t[4]||(t[4]=function(e){return B.getType=e}),disabled:B.mouseDownFlag,onChange:M.getTypeChange},null,8,["modelValue","disabled","onChange"]),h])]),Object(o["j"])("div",j,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"getType",value:"0",modelValue:B.getType,"onUpdate:modelValue":t[5]||(t[5]=function(e){return B.getType=e}),disabled:B.mouseDownFlag,onChange:M.getTypeChange},null,8,["modelValue","disabled","onChange"]),g])])])]),Object(o["j"])("div",f,"状态："+Object(o["F"])(B.status),1),Object(o["j"])("div",v,[Object(o["L"])(Object(o["j"])(U,{label:B.label,onMousedown:M.speechStart,onMouseup:M.speechStop,class:{"p-button-help":B.mouseDownFlag}},null,8,["label","onMousedown","onMouseup","class"]),[[o["I"],"2"===B.getType]]),Object(o["L"])(Object(o["j"])(U,{label:"断句",onClick:M.breakMessage},null,8,["onClick"]),[[o["I"],"1"===B.getType]]),Object(o["L"])(Object(o["j"])(U,{label:"鼠标移入说话",onMouseenter:M.speechStart,onMouseleave:M.speechStop,class:{"p-button-help":B.mouseDownFlag}},null,8,["onMouseenter","onMouseleave","class"]),[[o["I"],"3"===B.getType]]),Object(o["L"])(Object(o["j"])(U,{label:"按住空格说话",class:{"p-button-help":B.mouseDownFlag}},null,8,["class"]),[[o["I"],"4"===B.getType]])]),Object(o["j"])(E,{type:"dashed"}),Object(o["j"])("div",y,[Object(o["j"])("div",O,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"statementSel",value:"1",modelValue:B.statementSel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return B.statementSel=e})},null,8,["modelValue"]),S])]),Object(o["j"])("div",k,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"statementSel",value:"2",modelValue:B.statementSel,"onUpdate:modelValue":t[7]||(t[7]=function(e){return B.statementSel=e})},null,8,["modelValue"]),C])]),Object(o["j"])("div",x,[Object(o["j"])("label",null,[Object(o["j"])(L,{name:"statementSel",value:"0",modelValue:B.statementSel,"onUpdate:modelValue":t[8]||(t[8]=function(e){return B.statementSel=e})},null,8,["modelValue"]),T])])]),Object(o["j"])("div",w,[Object(o["j"])(A,{modelValue:B.message,"onUpdate:modelValue":t[9]||(t[9]=function(e){return B.message=e}),onFocus:t[10]||(t[10]=function(e){return B.inputIsFocus=!0}),onBlur:t[11]||(t[11]=function(e){return B.inputIsFocus=!1})},null,8,["modelValue"]),Object(o["j"])(U,{label:"0"===B.statementSel?"发送":"添加",onClick:M.sendByUser},null,8,["label","onClick"])]),Object(o["L"])(Object(o["j"])(E,{type:"dashed"},null,512),[[o["I"],B.commonStatements.length>0||B.temporaryStatement.length>0]]),Object(o["L"])(Object(o["j"])("div",V,[F,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(B.commonStatements,(function(e,t){return Object(o["t"])(),Object(o["g"])("div",{key:t},[Object(o["i"])(Object(o["F"])(e)+" ",1),Object(o["j"])(U,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(t){return M.sendCommonStatements(e)}},null,8,["onClick"]),Object(o["j"])(U,{label:"删除",class:"p-button-text p-button-danger nopadding-btn",onClick:function(e){return M.deleteCommonStatements(t)}},null,8,["onClick"])])})),128))],512),[[o["I"],B.commonStatements.length>0]]),Object(o["L"])(Object(o["j"])(E,{type:"dashed"},null,512),[[o["I"],B.commonStatements.length>0]]),Object(o["L"])(Object(o["j"])("div",I,[z,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(B.temporaryStatement,(function(e,t){return Object(o["t"])(),Object(o["g"])("div",{key:t},[Object(o["i"])(Object(o["F"])(e)+" ",1),Object(o["j"])(U,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(n){return M.sendTemporaryStatement(e,t)}},null,8,["onClick"]),Object(o["j"])(U,{label:"删除",class:"p-button-text p-button-danger nopadding-btn",onClick:function(e){return M.deleteTemporaryStatement(t)}},null,8,["onClick"])])})),128))],512),[[o["I"],B.temporaryStatement.length>0]])]})),_:1})])})),B=(n("a434"),n("bb57")),M=n("8398"),L=n("b35c"),U={name:"Divider",props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},computed:{containerClass(){return["p-divider p-component","p-divider-"+this.layout,"p-divider-"+this.type,{"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align)},{"p-divider-center":"horizontal"===this.layout&&"center"===this.align},{"p-divider-right":"horizontal"===this.layout&&"right"===this.align},{"p-divider-top":"vertical"===this.layout&&"top"===this.align},{"p-divider-center":"vertical"===this.layout&&(!this.align||"center"===this.align)},{"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}]}}};const E={key:0,class:"p-divider-content"};function A(e,t,n,l,i,a){return Object(o["t"])(),Object(o["g"])("div",{class:a.containerClass,role:"separator"},[e.$slots.default?(Object(o["t"])(),Object(o["g"])("div",E,[Object(o["A"])(e.$slots,"default")])):Object(o["h"])("",!0)],2)}function J(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}var N='\n.p-divider-horizontal {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    position: relative;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-divider-horizontal:before {\n    position: absolute;\n    display: block;\n    top: 50%;\n    left: 0;\n    width: 100%;\n    content: "";\n}\n.p-divider-horizontal.p-divider-left {\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n}\n.p-divider-horizontal.p-divider-right {\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.p-divider-horizontal.p-divider-center {\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-divider-content {\n    z-index: 1;\n}\n.p-divider-vertical {\n    min-height: 100%;\n    margin: 0 1rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-divider-vertical:before {\n    position: absolute;\n    display: block;\n    top: 0;\n    left: 50%;\n    height: 100%;\n    content: "";\n}\n.p-divider-vertical.p-divider-top {\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-divider-vertical.p-divider-center {\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-divider-vertical.p-divider-bottom {\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n}\n.p-divider-solid.p-divider-horizontal:before {\n    border-top-style: solid;\n}\n.p-divider-solid.p-divider-vertical:before {\n    border-left-style: solid;\n}\n.p-divider-dashed.p-divider-horizontal:before {\n    border-top-style: dashed;\n}\n.p-divider-dashed.p-divider-vertical:before {\n    border-left-style: dashed;\n}\n.p-divider-dotted.p-divider-horizontal:before {\n    border-top-style: dotted;\n}\n.p-divider-dotted.p-divider-horizontal:before {\n    border-left-style: dotted;\n}\n';J(N),U.render=A;var P=U,R=n("1e2d"),_=n("8055"),H=n.n(_),$={name:"SpeechControl",components:{Button:B["a"],InputText:M["a"],RadioButton:L["a"],Panel:R["a"],Divider:P},data:function(){return{label:"按住说话",mouseDownFlag:!1,socket:null,status:"未启动",getType:"0",message:"",keypressFlag:!1,inputIsFocus:!1,statementSel:"0",commonStatements:[],temporaryStatement:[]}},mounted:function(){this.toSocket(),this.initDocumentPress(),this.initCommonStatements()},beforeUnmount:function(){document.removeEventListener("keydown",this.keydownSpeechStart),document.removeEventListener("keyup",this.keyupSpeechStop)},methods:{sendCommonStatements:function(e){this.send(e)},sendTemporaryStatement:function(e,t){this.send(e),this.deleteTemporaryStatement(t)},initCommonStatements:function(){var e=localStorage.getItem("liveSpeechCommonStatements")||"[]";this.commonStatements=JSON.parse(e)},deleteCommonStatements:function(e){this.commonStatements.splice(e,1),localStorage.setItem("liveSpeechCommonStatements",JSON.stringify(this.commonStatements))},deleteTemporaryStatement:function(e){this.temporaryStatement.splice(e,1)},initDocumentPress:function(){document.addEventListener("keydown",this.keydownSpeechStart),document.addEventListener("keyup",this.keyupSpeechStop)},keydownSpeechStart:function(e){this.keypressFlag||32!==e.keyCode||this.inputIsFocus||"4"!==this.getType||(this.speechStart(),this.keypressFlag=!0)},keyupSpeechStop:function(e){this.keypressFlag&&32===e.keyCode&&!this.inputIsFocus&&"4"===this.getType&&(this.speechStop(),this.keypressFlag=!1)},sendSpeechControlStatus:function(){this.socket.emit("sendSpeechControlStatus",{getType:this.getType})},getTypeChange:function(){this.sendSpeechControlStatus()},send:function(e){this.socket.emit("send",{message:e})},sendByUser:function(){switch(this.statementSel){case"0":this.send(this.message);break;case"1":this.commonStatements.push(this.message),localStorage.setItem("liveSpeechCommonStatements",JSON.stringify(this.commonStatements));break;case"2":this.temporaryStatement.push(this.message);break;default:break}this.message=""},speechStart:function(){this.label="松开闭麦",this.mouseDownFlag=!0,this.socket.emit("controlSpeech",!0)},speechStop:function(){this.label="按住说话",this.mouseDownFlag=!1,this.socket.emit("controlSpeech",!1)},breakMessage:function(){this.socket.emit("controlSpeech",!1)},toSocket:function(){var e=this;this.socket=H.a.connect("/socketchat"),this.socket.on("connect",(function(){console.log("已连接"),e.socket.emit("wantHomeStatus"),e.socket.on("getHomeStatus",(function(t){e.status=t.status,e.getType=t.getType}))})),this.socket.on("disconnect",(function(){console.log("已断开")}))}}};n("3e0d");$.render=D,$.__scopeId="data-v-698f4998";t["default"]=$},a434:function(e,t,n){"use strict";var o=n("23e7"),l=n("23cb"),i=n("a691"),a=n("50c4"),s=n("7b0b"),c=n("65f0"),d=n("8418"),r=n("1dde"),u=n("ae40"),p=r("splice"),m=u("splice",{ACCESSORS:!0,0:0,1:2}),b=Math.max,h=Math.min,j=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!m},{splice:function(e,t){var n,o,r,u,p,m,f=s(this),v=a(f.length),y=l(e,v),O=arguments.length;if(0===O?n=o=0:1===O?(n=0,o=v-y):(n=O-2,o=h(b(i(t),0),v-y)),v+n-o>j)throw TypeError(g);for(r=c(f,o),u=0;u<o;u++)p=y+u,p in f&&d(r,u,f[p]);if(r.length=o,n<o){for(u=y;u<v-o;u++)p=u+o,m=u+n,p in f?f[m]=f[p]:delete f[m];for(u=v;u>v-o+n;u--)delete f[u-1]}else if(n>o)for(u=v-o;u>y;u--)p=u+o-1,m=u+n-1,p in f?f[m]=f[p]:delete f[m];for(u=0;u<n;u++)f[u+y]=arguments[u+2];return f.length=v-o+n,r}})},ae40:function(e,t,n){var o=n("83ab"),l=n("d039"),i=n("5135"),a=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(i(s,e))return s[e];t||(t={});var n=[][e],d=!!i(t,"ACCESSORS")&&t.ACCESSORS,r=i(t,0)?t[0]:c,u=i(t,1)?t[1]:void 0;return s[e]=!!n&&!l((function(){if(d&&!o)return!0;var e={length:-1};d?a(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,r,u)}))}}}]);
//# sourceMappingURL=SpeechControl.245500f7.js.map