(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SpeechControl"],{"06de":function(e,t,n){"use strict";n("0a24")},"0a24":function(e,t,n){},7275:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),l=Object(o["O"])("data-v-d75c8218");Object(o["w"])("data-v-d75c8218");var s={class:"pb15"},i=Object(o["j"])("div",{class:"pb10"},"捕获模式：",-1),a={class:"flex justify-content-center"},c={class:"mr10"},d=Object(o["i"])(" 自由捕获"),r={class:"mr10"},u=Object(o["i"])(" 鼠标按住"),p={class:"mr10"},b=Object(o["i"])(" 鼠标移入"),m={class:"mr10"},h=Object(o["i"])(" 按住空格"),j={class:"mr10"},g=Object(o["i"])(" 禁止捕获"),f={class:"pb10"},O={class:"pb10"},v={class:"flex justify-content-center pb10"},y={class:"mr10"},S=Object(o["i"])(" 常用语句"),k={class:"mr10"},C=Object(o["i"])(" 临时语句"),T={class:"mr10"},w=Object(o["i"])(" 发送"),x={class:"p-inputgroup"},V={class:"tl"},F=Object(o["j"])("div",null,"发送队列：",-1),M={class:"pt5"},I={class:"tl"},L=Object(o["j"])("div",null,"常用语句：",-1),B={class:"tl"},D=Object(o["j"])("div",null,"临时语句：",-1);Object(o["u"])();var z=l((function(e,t,n,z,U,E){var N=Object(o["B"])("RadioButton"),P=Object(o["B"])("Button"),J=Object(o["B"])("Divider"),A=Object(o["B"])("InputText"),K=Object(o["B"])("ProgressBar"),R=Object(o["B"])("Panel");return Object(o["t"])(),Object(o["g"])("main",null,[Object(o["j"])(R,{header:"语音获取",class:"mb15"},{default:l((function(){return[Object(o["j"])("div",s,[i,Object(o["j"])("div",a,[Object(o["j"])("div",c,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"getType",value:"1",modelValue:U.getType,"onUpdate:modelValue":t[1]||(t[1]=function(e){return U.getType=e}),disabled:U.mouseDownFlag,onChange:E.getTypeChange},null,8,["modelValue","disabled","onChange"]),d])]),Object(o["j"])("div",r,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"getType",value:"2",modelValue:U.getType,"onUpdate:modelValue":t[2]||(t[2]=function(e){return U.getType=e}),disabled:U.mouseDownFlag,onChange:E.getTypeChange},null,8,["modelValue","disabled","onChange"]),u])]),Object(o["j"])("div",p,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"getType",value:"3",modelValue:U.getType,"onUpdate:modelValue":t[3]||(t[3]=function(e){return U.getType=e}),disabled:U.mouseDownFlag,onChange:E.getTypeChange},null,8,["modelValue","disabled","onChange"]),b])]),Object(o["j"])("div",m,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"getType",value:"4",modelValue:U.getType,"onUpdate:modelValue":t[4]||(t[4]=function(e){return U.getType=e}),disabled:U.mouseDownFlag,onChange:E.getTypeChange},null,8,["modelValue","disabled","onChange"]),h])]),Object(o["j"])("div",j,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"getType",value:"0",modelValue:U.getType,"onUpdate:modelValue":t[5]||(t[5]=function(e){return U.getType=e}),disabled:U.mouseDownFlag,onChange:E.getTypeChange},null,8,["modelValue","disabled","onChange"]),g])])])]),Object(o["j"])("div",f,"状态："+Object(o["F"])(U.status),1),Object(o["j"])("div",O,[Object(o["L"])(Object(o["j"])(P,{label:U.label,onMousedown:E.speechStart,onMouseup:E.speechStop,class:{"p-button-help":U.mouseDownFlag}},null,8,["label","onMousedown","onMouseup","class"]),[[o["I"],"2"===U.getType]]),Object(o["L"])(Object(o["j"])(P,{label:"断句",onClick:E.breakMessage},null,8,["onClick"]),[[o["I"],"1"===U.getType]]),Object(o["L"])(Object(o["j"])(P,{label:"鼠标移入说话",onMouseenter:E.speechStart,onMouseleave:E.speechStop,class:{"p-button-help":U.mouseDownFlag}},null,8,["onMouseenter","onMouseleave","class"]),[[o["I"],"3"===U.getType]]),Object(o["L"])(Object(o["j"])(P,{label:"按住空格说话",class:{"p-button-help":U.mouseDownFlag}},null,8,["class"]),[[o["I"],"4"===U.getType]])]),Object(o["j"])(J,{type:"dashed"}),Object(o["j"])("div",v,[Object(o["j"])("div",y,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"statementSel",value:"1",modelValue:U.statementSel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return U.statementSel=e})},null,8,["modelValue"]),S])]),Object(o["j"])("div",k,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"statementSel",value:"2",modelValue:U.statementSel,"onUpdate:modelValue":t[7]||(t[7]=function(e){return U.statementSel=e})},null,8,["modelValue"]),C])]),Object(o["j"])("div",T,[Object(o["j"])("label",null,[Object(o["j"])(N,{name:"statementSel",value:"0",modelValue:U.statementSel,"onUpdate:modelValue":t[8]||(t[8]=function(e){return U.statementSel=e})},null,8,["modelValue"]),w])])]),Object(o["j"])("div",x,[Object(o["j"])(A,{modelValue:U.message,"onUpdate:modelValue":t[9]||(t[9]=function(e){return U.message=e}),onFocus:t[10]||(t[10]=function(e){return U.inputIsFocus=!0}),onBlur:t[11]||(t[11]=function(e){return U.inputIsFocus=!1}),onKeypress:Object(o["M"])(E.sendByUser,["enter"])},null,8,["modelValue","onKeypress"]),Object(o["j"])(P,{label:"0"===U.statementSel?"发送":"添加",onClick:E.sendByUser,onKeypress:Object(o["M"])(E.sendByUser,["enter"])},null,8,["label","onClick","onKeypress"])]),Object(o["L"])(Object(o["j"])(J,{type:"dashed"},null,512),[[o["I"],U.sendList.length>0]]),Object(o["L"])(Object(o["j"])("div",V,[F,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(U.sendList,(function(e){return Object(o["t"])(),Object(o["g"])("div",{key:e.id,class:"send-list"},[Object(o["j"])("div",null,[Object(o["i"])(Object(o["F"])(e.message)+" ",1),Object(o["j"])(P,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(t){return E.sendSpeechControlMessage(e.id,"quickSend")}},null,8,["onClick"]),Object(o["j"])(P,{label:"编辑",class:"p-button-text p-button-help nopadding-btn",onClick:function(t){return E.sendSpeechControlMessage(e.id,"editMessage",e.message)}},null,8,["onClick"]),Object(o["j"])(P,{label:"删除",class:"p-button-text p-button-danger\r\n            nopadding-btn",onClick:function(t){return E.sendSpeechControlMessage(e.id,"deleteMessage")}},null,8,["onClick"])]),Object(o["j"])("div",M,[Object(o["j"])(K,{class:"send-time-progress",showValue:!1,value:100*(1-(e.sendTime-U.timeNow)/(e.sendTime-e.addTime))},null,8,["value"])])])})),128))],512),[[o["I"],U.sendList.length>0]]),Object(o["L"])(Object(o["j"])(J,{type:"dashed"},null,512),[[o["I"],U.commonStatements.length>0||U.temporaryStatement.length>0]]),Object(o["L"])(Object(o["j"])("div",I,[L,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(U.commonStatements,(function(e,t){return Object(o["t"])(),Object(o["g"])("div",{key:t},[Object(o["i"])(Object(o["F"])(e)+" ",1),Object(o["j"])(P,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(t){return E.sendCommonStatements(e)}},null,8,["onClick"]),Object(o["j"])(P,{label:"删除",class:"p-button-text p-button-danger nopadding-btn",onClick:function(e){return E.deleteCommonStatements(t)}},null,8,["onClick"])])})),128))],512),[[o["I"],U.commonStatements.length>0]]),Object(o["L"])(Object(o["j"])(J,{type:"dashed"},null,512),[[o["I"],U.commonStatements.length>0]]),Object(o["L"])(Object(o["j"])("div",B,[D,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(U.temporaryStatement,(function(e,t){return Object(o["t"])(),Object(o["g"])("div",{key:t},[Object(o["i"])(Object(o["F"])(e)+" ",1),Object(o["j"])(P,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(n){return E.sendTemporaryStatement(e,t)}},null,8,["onClick"]),Object(o["j"])(P,{label:"删除",class:"p-button-text p-button-danger nopadding-btn",onClick:function(e){return E.deleteTemporaryStatement(t)}},null,8,["onClick"])])})),128))],512),[[o["I"],U.temporaryStatement.length>0]])]})),_:1})])})),U=(n("a434"),n("bb57")),E=n("8398"),N=n("b35c"),P={name:"Divider",props:{align:{type:String,default:null},layout:{type:String,default:"horizontal"},type:{type:String,default:"solid"}},computed:{containerClass(){return["p-divider p-component","p-divider-"+this.layout,"p-divider-"+this.type,{"p-divider-left":"horizontal"===this.layout&&(!this.align||"left"===this.align)},{"p-divider-center":"horizontal"===this.layout&&"center"===this.align},{"p-divider-right":"horizontal"===this.layout&&"right"===this.align},{"p-divider-top":"vertical"===this.layout&&"top"===this.align},{"p-divider-center":"vertical"===this.layout&&(!this.align||"center"===this.align)},{"p-divider-bottom":"vertical"===this.layout&&"bottom"===this.align}]}}};const J={key:0,class:"p-divider-content"};function A(e,t,n,l,s,i){return Object(o["t"])(),Object(o["g"])("div",{class:i.containerClass,role:"separator"},[e.$slots.default?(Object(o["t"])(),Object(o["g"])("div",J,[Object(o["A"])(e.$slots,"default")])):Object(o["h"])("",!0)],2)}function K(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}var R='\n.p-divider-horizontal {\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    width: 100%;\n    position: relative;\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-divider-horizontal:before {\n    position: absolute;\n    display: block;\n    top: 50%;\n    left: 0;\n    width: 100%;\n    content: "";\n}\n.p-divider-horizontal.p-divider-left {\n    -webkit-box-pack: start;\n        -ms-flex-pack: start;\n            justify-content: flex-start;\n}\n.p-divider-horizontal.p-divider-right {\n    -webkit-box-pack: end;\n        -ms-flex-pack: end;\n            justify-content: flex-end;\n}\n.p-divider-horizontal.p-divider-center {\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-divider-content {\n    z-index: 1;\n}\n.p-divider-vertical {\n    min-height: 100%;\n    margin: 0 1rem;\n    display: -webkit-box;\n    display: -ms-flexbox;\n    display: flex;\n    position: relative;\n    -webkit-box-pack: center;\n        -ms-flex-pack: center;\n            justify-content: center;\n}\n.p-divider-vertical:before {\n    position: absolute;\n    display: block;\n    top: 0;\n    left: 50%;\n    height: 100%;\n    content: "";\n}\n.p-divider-vertical.p-divider-top {\n    -webkit-box-align: start;\n        -ms-flex-align: start;\n            align-items: flex-start;\n}\n.p-divider-vertical.p-divider-center {\n    -webkit-box-align: center;\n        -ms-flex-align: center;\n            align-items: center;\n}\n.p-divider-vertical.p-divider-bottom {\n    -webkit-box-align: end;\n        -ms-flex-align: end;\n            align-items: flex-end;\n}\n.p-divider-solid.p-divider-horizontal:before {\n    border-top-style: solid;\n}\n.p-divider-solid.p-divider-vertical:before {\n    border-left-style: solid;\n}\n.p-divider-dashed.p-divider-horizontal:before {\n    border-top-style: dashed;\n}\n.p-divider-dashed.p-divider-vertical:before {\n    border-left-style: dashed;\n}\n.p-divider-dotted.p-divider-horizontal:before {\n    border-top-style: dotted;\n}\n.p-divider-dotted.p-divider-horizontal:before {\n    border-left-style: dotted;\n}\n';K(R),P.render=A;var _=P,H=n("1e2d"),$=n("8055"),q=n.n($),G=n("41cf"),Q=n("c045"),W={name:"SpeechControl",components:{Button:U["a"],InputText:E["a"],RadioButton:N["a"],Panel:H["a"],Divider:_,ProgressBar:Q["a"]},data:function(){return{label:"按住说话",mouseDownFlag:!1,socket:null,status:"未启动",getType:"0",message:"",keypressFlag:!1,inputIsFocus:!1,statementSel:"0",commonStatements:[],temporaryStatement:[],sendList:[],timeNow:(new Date).getTime()}},mounted:function(){this.toSocket(),this.initDocumentPress(),this.initCommonStatements(),this.initTime()},beforeUnmount:function(){document.removeEventListener("keydown",this.keydownSpeechStart),document.removeEventListener("keyup",this.keyupSpeechStop)},methods:{sendSpeechControlMessage:function(e,t,n){var o={id:e,type:t};"editMessage"===t&&(this.message=n),this.socket.emit("sendMessageListId",o)},initTime:function(){var e=this;G["b"]((function(){e.sendList.length>0&&(e.timeNow=(new Date).getTime())}),42)},sendCommonStatements:function(e){this.send(e)},sendTemporaryStatement:function(e,t){this.send(e),this.deleteTemporaryStatement(t)},initCommonStatements:function(){var e=localStorage.getItem("liveSpeechCommonStatements")||"[]";this.commonStatements=JSON.parse(e)},deleteCommonStatements:function(e){this.commonStatements.splice(e,1),localStorage.setItem("liveSpeechCommonStatements",JSON.stringify(this.commonStatements))},deleteTemporaryStatement:function(e){this.temporaryStatement.splice(e,1)},initDocumentPress:function(){document.addEventListener("keydown",this.keydownSpeechStart),document.addEventListener("keyup",this.keyupSpeechStop)},keydownSpeechStart:function(e){this.keypressFlag||32!==e.keyCode||this.inputIsFocus||"4"!==this.getType||(this.speechStart(),this.keypressFlag=!0)},keyupSpeechStop:function(e){this.keypressFlag&&32===e.keyCode&&!this.inputIsFocus&&"4"===this.getType&&(this.speechStop(),this.keypressFlag=!1)},sendSpeechControlStatus:function(){this.socket.emit("sendSpeechControlStatus",{getType:this.getType})},getTypeChange:function(){this.sendSpeechControlStatus()},send:function(e){this.socket.emit("send",{message:e})},sendByUser:function(){switch(this.statementSel){case"0":this.socket.emit("sendSpeechControlText",this.message);break;case"1":this.commonStatements.push(this.message),localStorage.setItem("liveSpeechCommonStatements",JSON.stringify(this.commonStatements));break;case"2":this.temporaryStatement.push(this.message);break;default:break}this.message=""},speechStart:function(){this.label="松开闭麦",this.mouseDownFlag=!0,this.socket.emit("controlSpeech",!0)},speechStop:function(){this.label="按住说话",this.mouseDownFlag=!1,this.socket.emit("controlSpeech",!1)},breakMessage:function(){this.socket.emit("controlSpeech",!1)},toSocket:function(){var e=this;this.socket=q.a.connect("/socketchat"),this.socket.on("connect",(function(){console.log("已连接"),e.socket.emit("wantHomeStatus"),e.socket.on("getHomeStatus",(function(t){e.status=t.status,e.getType=t.getType})),e.socket.on("getMessageListData",(function(t){e.sendList=t}))})),this.socket.on("disconnect",(function(){console.log("已断开")}))}}},X=(n("06de"),n("6b0d")),Y=n.n(X);const Z=Y()(W,[["render",z],["__scopeId","data-v-d75c8218"]]);t["default"]=Z},a434:function(e,t,n){"use strict";var o=n("23e7"),l=n("23cb"),s=n("a691"),i=n("50c4"),a=n("7b0b"),c=n("65f0"),d=n("8418"),r=n("1dde"),u=n("ae40"),p=r("splice"),b=u("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,h=Math.min,j=9007199254740991,g="Maximum allowed length exceeded";o({target:"Array",proto:!0,forced:!p||!b},{splice:function(e,t){var n,o,r,u,p,b,f=a(this),O=i(f.length),v=l(e,O),y=arguments.length;if(0===y?n=o=0:1===y?(n=0,o=O-v):(n=y-2,o=h(m(s(t),0),O-v)),O+n-o>j)throw TypeError(g);for(r=c(f,o),u=0;u<o;u++)p=v+u,p in f&&d(r,u,f[p]);if(r.length=o,n<o){for(u=v;u<O-o;u++)p=u+o,b=u+n,p in f?f[b]=f[p]:delete f[b];for(u=O;u>O-o+n;u--)delete f[u-1]}else if(n>o)for(u=O-o;u>v;u--)p=u+o-1,b=u+n-1,p in f?f[b]=f[p]:delete f[b];for(u=0;u<n;u++)f[u+v]=arguments[u+2];return f.length=O-o+n,r}})}}]);
//# sourceMappingURL=SpeechControl.0033bcd7.js.map