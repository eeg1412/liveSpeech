(function(e){function t(t){for(var o,c,l=t[0],s=t[1],u=t[2],r=0,d=[];r<l.length;r++)c=l[r],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&d.push(a[c][0]),a[c]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);b&&b(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},c={index:0},a={index:0},i=[];function l(e){return s.p+"js/"+({Live2d:"Live2d",SpeechControl:"SpeechControl",chat:"chat"}[e]||e)+"."+{Live2d:"a7036ce8",SpeechControl:"60bff392",chat:"825eab04"}[e]+".js"}function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={Live2d:1,SpeechControl:1,chat:1};c[e]?t.push(c[e]):0!==c[e]&&n[e]&&t.push(c[e]=new Promise((function(t,n){for(var o="css/"+({Live2d:"Live2d",SpeechControl:"SpeechControl",chat:"chat"}[e]||e)+"."+{Live2d:"e6e99418",SpeechControl:"5232a72b",chat:"79f1f898"}[e]+".css",a=s.p+o,i=document.getElementsByTagName("link"),l=0;l<i.length;l++){var u=i[l],r=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(r===o||r===a))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){u=d[l],r=u.getAttribute("data-href");if(r===o||r===a)return t()}var b=document.createElement("link");b.rel="stylesheet",b.type="text/css",b.onload=t,b.onerror=function(t){var o=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=o,delete c[e],b.parentNode.removeChild(b),n(i)},b.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(b)})).then((function(){c[e]=0})));var o=a[e];if(0!==o)if(o)t.push(o[2]);else{var i=new Promise((function(t,n){o=a[e]=[t,n]}));t.push(o[2]=i);var u,r=document.createElement("script");r.charset="utf-8",r.timeout=120,s.nc&&r.setAttribute("nonce",s.nc),r.src=l(e);var d=new Error;u=function(t){r.onerror=r.onload=null,clearTimeout(b);var n=a[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+o+": "+c+")",d.name="ChunkLoadError",d.type=o,d.request=c,n[1](d)}a[e]=void 0}};var b=setTimeout((function(){u({type:"timeout",target:r})}),12e4);r.onerror=r.onload=u,document.head.appendChild(r)}return Promise.all(t)},s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],r=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var b=r;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},3061:function(e,t,n){"use strict";n("3479")},3479:function(e,t,n){},3541:function(e,t,n){"use strict";n("7c65")},"4dcb":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),c={id:"nav"};function a(e,t){var n=Object(o["B"])("router-view");return Object(o["t"])(),Object(o["g"])("div",c,[Object(o["j"])(n)])}const i={};i.render=a;var l=i,s=n("9319"),u=(n("d3b7"),n("6c02")),r={class:"home"},d={class:"pb15"},b=Object(o["j"])("div",{class:"pb10"},"捕获模式：",-1),p={class:"flex"},m={class:"mr10"},j=Object(o["i"])(" 自由捕获"),g={class:"mr10"},h=Object(o["i"])(" 鼠标按住"),v={class:"mr10"},f=Object(o["i"])(" 鼠标移入"),O={class:"mr10"},y=Object(o["i"])(" 按住空格"),S={class:"mr10"},k=Object(o["i"])(" 禁止捕获"),T={key:0},V={class:"mt10 mb10"},C={class:"mb10"},L={class:"pb10"},w={class:"mb10"},M={class:"pb10"},U={class:"mb10"},x=Object(o["j"])("div",{class:"pb10"},"断句延时(ms)：",-1),z={class:"mb10 mt10"},B=Object(o["j"])("div",{class:"pb10"},"延迟发送(ms)：",-1),A={class:"pb10 pt10"},D={class:"pb10"},N={class:"p-inputgroup mb10"},I=Object(o["j"])("div",null,"发送队列：",-1),P={class:"pt5"},R={class:"pb15"},_={class:"pb10"},K=Object(o["i"])(" 头像URL："),E={class:"pb15"},H=Object(o["j"])("div",{class:"pb10"}," live2d模型： ",-1),q={class:"flex"},Y={class:"mr10"},F=Object(o["i"])(" LiveroiD_A-Y01"),G={class:"mr10"},J=Object(o["i"])(" LiveroiD_A-Y02"),$={class:"mr10"},W=Object(o["i"])(" 桃瀬ひより"),X={class:"pb15"},Q=Object(o["j"])("div",{class:"pb10"},"是否语音播报：",-1),Z={class:"pb15"},ee=Object(o["j"])("div",{class:"pb10"},"语音提供商：",-1),te={class:"pb15"},ne=Object(o["j"])("div",{class:"pb10"},[Object(o["i"])(" 声源（参考"),Object(o["j"])("a",{href:"https://docs.microsoft.com/zh-cn/azure/cognitive-services/speech-service/language-support#text-to-speech",target:"_blank"},"Azure文档"),Object(o["i"])("）： ")],-1),oe={class:"pb15"},ce=Object(o["j"])("div",{class:"pb10"},"密钥：",-1),ae={class:"pb15"},ie=Object(o["j"])("div",{class:"pb10"},"位置/区域：",-1),le={class:"pb15"},se=Object(o["j"])("div",{class:"pb10"},[Object(o["i"])(" 声源（参考"),Object(o["j"])("a",{href:"https://cloud.google.com/text-to-speech",target:"_blank"},"谷歌云文档"),Object(o["i"])("）： ")],-1),ue={class:"pb15"},re=Object(o["j"])("div",{class:"pb10"}," 语速： ",-1),de={class:"pb15"},be=Object(o["j"])("div",{class:"pb10"}," 语调： ",-1),pe={class:"pb15"},me=Object(o["j"])("div",{class:"pb10"},"APPKEY：",-1),je={class:"pb15"},ge=Object(o["j"])("div",{class:"pb10"},"AccessToken：",-1),he={class:"pb15"},ve=Object(o["j"])("div",{class:"pb10"},[Object(o["i"])(" 声源（参考"),Object(o["j"])("a",{href:"https://help.aliyun.com/document_detail/84435.htm?spm=a2c4g.11186623.2.22.28cf4a9c70HlT2#topic-2572243",target:"_blank"},"阿里云文档"),Object(o["i"])("）： ")],-1),fe={class:"pb15"},Oe=Object(o["j"])("div",{class:"pb10"},"气泡聊天窗：",-1),ye={class:"pb15"},Se=Object(o["j"])("div",{class:"pb10"},"live2d：",-1);function ke(e,t,n,c,a,i){var l=Object(o["B"])("ConfirmDialog"),s=Object(o["B"])("RadioButton"),u=Object(o["B"])("ProgressBar"),ke=Object(o["B"])("Slider"),Te=Object(o["B"])("InputNumber"),Ve=Object(o["B"])("Button"),Ce=Object(o["B"])("InputText"),Le=Object(o["B"])("Panel"),we=Object(o["B"])("Avatar"),Me=Object(o["B"])("InputSwitch"),Ue=Object(o["B"])("SelectButton"),xe=Object(o["B"])("Password"),ze=Object(o["B"])("Toast");return Object(o["t"])(),Object(o["g"])("div",r,[Object(o["j"])(l),Object(o["j"])(Le,{header:"语音获取",class:"mb15"},{default:Object(o["K"])((function(){return[Object(o["j"])("div",d,[b,Object(o["j"])("div",p,[Object(o["j"])("div",m,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"getType",value:"1",modelValue:a.getType,"onUpdate:modelValue":t[1]||(t[1]=function(e){return a.getType=e}),onChange:i.getTypeChange},null,8,["modelValue","onChange"]),j])]),Object(o["j"])("div",g,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"getType",value:"2",modelValue:a.getType,"onUpdate:modelValue":t[2]||(t[2]=function(e){return a.getType=e}),onChange:i.getTypeChange},null,8,["modelValue","onChange"]),h])]),Object(o["j"])("div",v,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"getType",value:"3",modelValue:a.getType,"onUpdate:modelValue":t[3]||(t[3]=function(e){return a.getType=e}),onChange:i.getTypeChange},null,8,["modelValue","onChange"]),f])]),Object(o["j"])("div",O,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"getType",value:"4",modelValue:a.getType,"onUpdate:modelValue":t[4]||(t[4]=function(e){return a.getType=e}),onChange:i.getTypeChange},null,8,["modelValue","onChange"]),y])]),Object(o["j"])("div",S,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"getType",value:"0",modelValue:a.getType,"onUpdate:modelValue":t[5]||(t[5]=function(e){return a.getType=e}),onChange:i.getTypeChange},null,8,["modelValue","onChange"]),k])])]),a.analyser&&"1"===a.getType?(Object(o["t"])(),Object(o["g"])("div",T,[Object(o["j"])("div",V,[Object(o["j"])(u,{value:a.volLevel/a.voiceSizeSensitivity},null,8,["value"])]),Object(o["j"])("div",C,[Object(o["j"])("div",L,"阈值("+Object(o["F"])(a.voiceThreshold)+")：",1),Object(o["j"])(ke,{modelValue:a.voiceThreshold,"onUpdate:modelValue":t[6]||(t[6]=function(e){return a.voiceThreshold=e}),min:0,max:100,onChange:i.voiceThresholdChange},null,8,["modelValue","onChange"])]),Object(o["j"])("div",w,[Object(o["j"])("div",M,"灵敏度("+Object(o["F"])(-a.minDecibels)+"dB)：",1),Object(o["j"])(ke,{modelValue:a.minDecibels,"onUpdate:modelValue":t[7]||(t[7]=function(e){return a.minDecibels=e}),onChange:i.minDecibelsChange,min:31,max:100},null,8,["modelValue","onChange"])]),Object(o["j"])("div",U,[x,Object(o["j"])(Te,{modelValue:a.breakTime,"onUpdate:modelValue":t[8]||(t[8]=function(e){return a.breakTime=e}),modelModifiers:{number:!0},showButtons:"",buttonLayout:"horizontal",step:1,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",min:100,max:1e4},null,8,["modelValue"])])])):Object(o["h"])("",!0),Object(o["j"])("div",null,[Object(o["j"])("div",z,[B,Object(o["j"])(Te,{modelValue:a.sendTimeDaly,"onUpdate:modelValue":t[9]||(t[9]=function(e){return a.sendTimeDaly=e}),modelModifiers:{number:!0},showButtons:"",buttonLayout:"horizontal",step:1,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",min:0},null,8,["modelValue"])])]),Object(o["j"])("div",A,[Object(o["j"])(Ve,{label:"复制控制器URL",class:"p-button-raised p-button-text p-button-sm p-button-mr10",onClick:t[10]||(t[10]=function(e){return i.copyControlUrl("speechcontrol")})}),Object(o["j"])(Ve,{label:"打开控制器",class:"p-button-raised p-button-text p-button-sm",onClick:t[11]||(t[11]=function(e){return i.openControlUrl("speechcontrol")})})])]),Object(o["j"])("div",D,"状态："+Object(o["F"])(a.status),1),Object(o["j"])("div",N,[Object(o["j"])(Ce,{placeholder:"编辑内容",modelValue:a.message,"onUpdate:modelValue":t[12]||(t[12]=function(e){return a.message=e}),onKeypress:Object(o["M"])(i.sendByUser,["enter"])},null,8,["modelValue","onKeypress"]),Object(o["j"])(Ve,{label:"手动发送",onClick:i.sendByUser,onKeypress:Object(o["M"])(i.sendByUser,["enter"])},null,8,["onClick","onKeypress"])]),Object(o["L"])(Object(o["j"])("div",null,[I,(Object(o["t"])(!0),Object(o["g"])(o["a"],null,Object(o["z"])(a.sendList,(function(e){return Object(o["t"])(),Object(o["g"])("div",{key:e.id,class:"send-list"},[Object(o["j"])("div",null,[Object(o["i"])(Object(o["F"])(e.message)+" ",1),Object(o["j"])(Ve,{label:"立刻发送",class:"p-button-text nopadding-btn",onClick:function(t){return i.quickSend(e)}},null,8,["onClick"]),Object(o["j"])(Ve,{label:"编辑",class:"p-button-text p-button-help nopadding-btn",onClick:function(t){return i.editMessage(e)}},null,8,["onClick"]),Object(o["j"])(Ve,{label:"删除",class:"p-button-text p-button-danger nopadding-btn",onClick:function(t){return i.deleteMessage(e.id)}},null,8,["onClick"])]),Object(o["j"])("div",P,[Object(o["j"])(u,{class:"send-time-progress",showValue:!1,value:100*(1-(e.sendTime-a.timeNow)/(e.sendTime-e.addTime))},null,8,["value"])])])})),128))],512),[[o["I"],a.sendTimeDaly>0]])]})),_:1}),Object(o["j"])(Le,{header:"全局设置",class:"mb15"},{default:Object(o["K"])((function(){return[Object(o["j"])("form",null,[Object(o["j"])("div",R,[Object(o["j"])("div",_,[K,a.avatarPre?(Object(o["t"])(),Object(o["g"])(we,{key:0,shape:"circle",image:a.avatarPre},null,8,["image"])):Object(o["h"])("",!0)]),Object(o["j"])("div",null,[Object(o["j"])(Ce,{class:"input-text-full",onBlur:i.changeAvatar,placeholder:"设置头像URL",modelValue:a.avatar,"onUpdate:modelValue":t[13]||(t[13]=function(e){return a.avatar=e})},null,8,["onBlur","modelValue"])])]),Object(o["j"])("div",E,[H,Object(o["j"])("div",q,[Object(o["j"])("div",Y,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"selModel",value:"LiveroiD_A-Y01",modelValue:a.selModel,"onUpdate:modelValue":t[14]||(t[14]=function(e){return a.selModel=e})},null,8,["modelValue"]),F])]),Object(o["j"])("div",G,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"selModel",value:"LiveroiD_A-Y02",modelValue:a.selModel,"onUpdate:modelValue":t[15]||(t[15]=function(e){return a.selModel=e})},null,8,["modelValue"]),J])]),Object(o["j"])("div",$,[Object(o["j"])("label",null,[Object(o["j"])(s,{name:"selModel",value:"hiyori",modelValue:a.selModel,"onUpdate:modelValue":t[16]||(t[16]=function(e){return a.selModel=e})},null,8,["modelValue"]),W])])])]),Object(o["j"])("div",X,[Q,Object(o["j"])("div",null,[Object(o["j"])(Me,{modelValue:a.isSpeech,"onUpdate:modelValue":t[17]||(t[17]=function(e){return a.isSpeech=e})},null,8,["modelValue"])])]),Object(o["L"])(Object(o["j"])("div",null,[Object(o["j"])("div",Z,[ee,Object(o["j"])("div",null,[Object(o["j"])(Ue,{modelValue:a.cloudSel,"onUpdate:modelValue":t[18]||(t[18]=function(e){return a.cloudSel=e}),options:a.cloudList,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])]),Object(o["L"])(Object(o["j"])("div",null,[Object(o["j"])("div",te,[ne,Object(o["j"])("div",null,[Object(o["j"])(Ce,{class:"input-text-full",modelValue:a.azureVoice,"onUpdate:modelValue":t[19]||(t[19]=function(e){return a.azureVoice=e})},null,8,["modelValue"])])]),Object(o["j"])("div",oe,[ce,Object(o["j"])("div",null,[Object(o["j"])(xe,{feedback:!1,class:"input-text-full",modelValue:a.azureKey,"onUpdate:modelValue":t[20]||(t[20]=function(e){return a.azureKey=e}),toggleMask:""},null,8,["modelValue"])])]),Object(o["j"])("div",ae,[ie,Object(o["j"])("div",null,[Object(o["j"])(xe,{feedback:!1,class:"input-text-full",modelValue:a.azureRegion,"onUpdate:modelValue":t[21]||(t[21]=function(e){return a.azureRegion=e}),toggleMask:""},null,8,["modelValue"])])])],512),[[o["I"],"azure"===a.cloudSel]]),Object(o["L"])(Object(o["j"])("div",null,[Object(o["j"])("div",le,[se,Object(o["j"])("div",null,[Object(o["j"])(Ce,{class:"input-text-full",modelValue:a.googleVoice,"onUpdate:modelValue":t[22]||(t[22]=function(e){return a.googleVoice=e})},null,8,["modelValue"])])]),Object(o["j"])("div",ue,[re,Object(o["j"])("div",null,[Object(o["j"])(Te,{modelValue:a.googleSpeakingRate,"onUpdate:modelValue":t[23]||(t[23]=function(e){return a.googleSpeakingRate=e}),modelModifiers:{number:!0},showButtons:"",buttonLayout:"horizontal",step:.01,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",min:.25,max:4},null,8,["modelValue"])])]),Object(o["j"])("div",de,[be,Object(o["j"])("div",null,[Object(o["j"])(Te,{modelValue:a.googlePitch,"onUpdate:modelValue":t[24]||(t[24]=function(e){return a.googlePitch=e}),modelModifiers:{number:!0},showButtons:"",buttonLayout:"horizontal",step:1,incrementButtonIcon:"pi pi-plus",decrementButtonIcon:"pi pi-minus",min:-20,max:20},null,8,["modelValue"])])])],512),[[o["I"],"googleCloud"===a.cloudSel]]),Object(o["L"])(Object(o["j"])("div",null,[Object(o["j"])("div",pe,[me,Object(o["j"])("div",null,[Object(o["j"])(xe,{feedback:!1,class:"input-text-full",modelValue:a.appkey,"onUpdate:modelValue":t[25]||(t[25]=function(e){return a.appkey=e}),toggleMask:""},null,8,["modelValue"])])]),Object(o["j"])("div",je,[ge,Object(o["j"])("div",null,[Object(o["j"])(xe,{feedback:!1,class:"input-text-full",modelValue:a.AccessToken,"onUpdate:modelValue":t[26]||(t[26]=function(e){return a.AccessToken=e}),toggleMask:""},null,8,["modelValue"])])]),Object(o["j"])("div",he,[ve,Object(o["j"])("div",null,[Object(o["j"])(Ce,{class:"input-text-full",modelValue:a.voice,"onUpdate:modelValue":t[27]||(t[27]=function(e){return a.voice=e})},null,8,["modelValue"])])])],512),[[o["I"],"aliyun"===a.cloudSel]])],512),[[o["I"],a.isSpeech]]),Object(o["j"])(Ve,{label:"发送设置",class:"p-button-sm",onClick:i.saveSetting},null,8,["onClick"])])]})),_:1}),Object(o["j"])(Le,{header:"获取地址"},{default:Object(o["K"])((function(){return[Object(o["j"])("div",fe,[Oe,Object(o["j"])("div",null,[Object(o["j"])(Ve,{label:"复制聊天窗URL",class:"p-button-raised p-button-text p-button-sm p-button-mr10",onClick:t[28]||(t[28]=function(e){return i.copyControlUrl("chat")})}),Object(o["j"])(Ve,{label:"打开聊天窗",class:"p-button-raised p-button-text p-button-sm",onClick:t[29]||(t[29]=function(e){return i.openControlUrl("chat")})})])]),Object(o["j"])("div",ye,[Se,Object(o["j"])("div",null,[Object(o["j"])(Ve,{label:"复制live2d URL",class:"p-button-raised p-button-text p-button-sm p-button-mr10",onClick:t[30]||(t[30]=function(e){return i.copyControlUrl("live2d")})}),Object(o["j"])(Ve,{label:"打开live2d",class:"p-button-raised p-button-text p-button-sm",onClick:t[31]||(t[31]=function(e){return i.openControlUrl("live2d")})})])])]})),_:1}),Object(o["j"])(ze,{position:"top-center"})])}n("99af"),n("4de4"),n("7db0"),n("4160"),n("a9e3"),n("9129"),n("159b"),n("96cf");var Te=n("1da1"),Ve=n("8055"),Ce=n.n(Ve),Le=n("41cf"),we=n("8398"),Me=n("bb57"),Ue=n("1e2d"),xe=n("48d5"),ze=n("f4ad"),Be=n("a5af"),Ae=n("b3b6"),De=n("b35c"),Ne=n("e6a9"),Ie=n.n(Ne),Pe=n("3822"),Re=n("a034"),_e=(n("13d5"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),{start:function(){var e=window.navigator;e.getUserMedia=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia;var t=window.AudioContext||window.webkitAudioContext,n=!(!e.getUserMedia||!t),o=n&&new t;return new Promise((function(t,n){e.getUserMedia({audio:!0},(function(e){var n=o.createMediaStreamSource(e),c=o.createAnalyser();n.connect(c),c.fftSize=2048,t(c)}),(function(){n()}))}))},getVoiceSize:function(e){var t=new Uint8Array(e.frequencyBinCount);e.getByteFrequencyData(t);var n=t,o=n.reduce((function(e,t){return e+t}));return o}}),Ke=n("c045"),Ee=n("14f2"),He=n("9383"),qe={name:"Home",components:{InputText:we["a"],Button:Me["a"],Panel:Ue["a"],Avatar:xe["a"],InputSwitch:ze["a"],SelectButton:Be["a"],Toast:Ae["a"],RadioButton:De["a"],InputNumber:Pe["a"],Password:Re["a"],ProgressBar:Ke["a"],Slider:Ee["a"],ConfirmDialog:He["a"]},data:function(){return{rec:null,message:"",avatarPre:"",socket:null,status:"未启动",getType:"0",cloudList:[{name:"谷歌娘(仅海外)",value:"googleNiang"},{name:"谷歌云(仅海外)",value:"googleCloud"},{name:"阿里云智能语音交互",value:"aliyun"},{name:"微软Azure",value:"azure"}],isSpeech:!1,avatar:"",cloudSel:"googleNiang",appkey:"",AccessToken:"",voice:"xiaoyun",googleVoice:"cmn-CN-Wavenet-A",googlePitch:0,googleSpeakingRate:1,azureKey:"",azureRegion:"",azureVoice:"zh-CN-XiaoxiaoNeural",selModel:"LiveroiD_A-Y01",timer:null,voiceTimer:null,analyser:null,volLevel:0,speechOn:!1,voiceSizeSensitivity:1e3,startListenAudio:!1,minDecibels:localStorage.getItem("minDecibels")?Number(localStorage.getItem("minDecibels")):75,voiceThreshold:localStorage.getItem("voiceThreshold")?Number(localStorage.getItem("voiceThreshold")):10,breakTime:localStorage.getItem("breakTime")?Number(localStorage.getItem("breakTime")):800,sendList:[],sendTimeDaly:localStorage.getItem("sendTimeDaly")?Number(localStorage.getItem("sendTimeDaly")):3e3,timeNow:(new Date).getTime()}},computed:{},watch:{status:function(){this.sendHomeStatus()},sendTimeDaly:function(e){localStorage.setItem("sendTimeDaly",e)},breakTime:function(e){console.log(e),localStorage.setItem("breakTime",e)},sendList:{handler:function(e){console.log(e),this.socket.emit("sendMessageListData",e)},deep:!0}},methods:{quickSend:function(e){e["sendTime"]=this.timeNow},editMessage:function(e){this.message=e.message,this.deleteMessage(e.id)},deleteMessage:function(e){this.sendList=this.sendList.filter((function(t){return t.id!==e}))},initTime:function(){var e=this;Le["b"]((function(){e.sendList.length>0&&(e.timeNow=(new Date).getTime(),e.doSendMessageList())}),42)},voiceThresholdChange:function(){localStorage.setItem("voiceThreshold",this.voiceThreshold)},initAudioListen:function(){var e=this;_e.start().then((function(t){e.analyser=t,e.minDecibelsChange(),e.startGetVoiceSize()}))},minDecibelsChange:function(){this.analyser.minDecibels=-this.minDecibels,localStorage.setItem("minDecibels",this.minDecibels)},startGetVoiceSize:function(){var e=this;this.timer=Le["b"]((function(){if("1"===e.getType){var t=_e.getVoiceSize(e.analyser);t/e.voiceSizeSensitivity>e.voiceThreshold?(e.voiceTimer&&(Le["a"](e.voiceTimer),e.voiceTimer=null),e.speechOn=!0):e.speechOn&&!e.voiceTimer&&(clearTimeout(e.voiceTimer),e.voiceTimer=null,e.voiceTimer=Le["c"]((function(){e.speechOn&&(e.speechStop(),console.log("断句")),e.voiceTimer=null}),e.breakTime)),e.volLevel=t}}),30)},sendHomeStatus:function(){this.socket.emit("sendHomeStatus",{status:this.status,getType:this.getType})},openControlUrl:function(e){window.open("".concat(window.location.origin,"/").concat(e),"_blank")},copyControlUrl:function(e){var t=this;return Object(Te["a"])(regeneratorRuntime.mark((function n(){var o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=Ie()(),c=o.toClipboard,n.prev=1,n.next=4,c("".concat(window.location.origin,"/").concat(e));case 4:t.$toast.add({severity:"success",summary:"成功",detail:"复制成功",life:3e3}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](1),t.$toast.add({severity:"errro",summary:"失败",detail:"复制失败",life:3e3});case 10:case"end":return n.stop()}}),n,null,[[1,7]])})))()},saveSetting:function(){var e={isSpeech:this.isSpeech,avatar:this.avatar,cloudSel:this.cloudSel,appkey:this.appkey,AccessToken:this.AccessToken,voice:this.voice,googleVoice:this.googleVoice,googlePitch:this.googlePitch,googleSpeakingRate:this.googleSpeakingRate,azureKey:this.azureKey,azureRegion:this.azureRegion,azureVoice:this.azureVoice,selModel:this.selModel};this.socket.emit("settingData",e),this.$toast.add({severity:"success",summary:"发送成功",detail:"发送成功",life:3e3}),localStorage.setItem("liveSpeechSetting",JSON.stringify(e))},sendByUser:function(){if(""===this.message)return!1;this.addToSendList(this.message),this.message=""},changeAvatar:function(){this.avatarPre=this.avatar},toSocket:function(){var e=this;this.socket=Ce.a.connect("/socketchat"),this.socket.on("connect",(function(){console.log("已连接");var t={isSpeech:e.isSpeech,avatar:e.avatar,cloudSel:e.cloudSel,appkey:e.appkey,AccessToken:e.AccessToken,voice:e.voice,googleVoice:e.googleVoice,googlePitch:e.googlePitch,googleSpeakingRate:e.googleSpeakingRate,azureKey:e.azureKey,azureRegion:e.azureRegion,azureVoice:e.azureVoice,selModel:e.selModel};e.socket.emit("settingData",t),e.socket.on("getControlSpeech",(function(t){"2"===e.getType||"3"===e.getType||"4"===e.getType?t?e.speechStart():e.speechStop():"1"===e.getType&&(t||e.speechStop())})),e.socket.on("speechWantHomeStatus",(function(){e.sendHomeStatus()})),e.socket.on("getSpeechControlText",(function(t){t&&e.addToSendList(t)})),e.socket.on("getMessageListId",(function(t){var n=t.id,o=t.type,c=e.sendList.find((function(e){return e.id===n}));switch(o){case"editMessage":case"deleteMessage":e.deleteMessage(n);break;case"quickSend":c&&e.quickSend(c);break;default:break}})),e.socket.on("getSpeechControlStatus",(function(t){switch(e.getType=t.getType,e.getType){case"0":e.speechStop();break;case"1":e.speechStart();break;case"2":e.speechStop();break;case"3":e.speechStop();break;case"4":e.speechStop();break;default:break}}))})),this.socket.on("disconnect",(function(){console.log("已断开")}))},addToSendList:function(e){this.sendList.push({id:String((new Date).getTime())+"-"+String(Math.floor(1e3*Math.random())),message:e,addTime:(new Date).getTime(),sendTime:(new Date).getTime()+this.sendTimeDaly})},doSendMessageList:function(){var e=this;if(this.sendList.length>0){var t=this.timeNow,n=0;this.sendList.forEach((function(o){t>=o.sendTime&&(e.send(o.message),n++)})),n>0&&(this.sendList=this.sendList.filter((function(e){return t<e.sendTime})))}},send:function(e){this.socket.emit("send",{message:e})},getTypeChange:function(){switch(this.getType){case"0":this.speechStop();break;case"1":this.speechStart();break;case"2":this.speechStop();break;case"3":this.speechStop();break;case"4":this.speechStop();break;default:break}this.sendHomeStatus()},speechStart:function(){this.rec.start()},speechStop:function(){this.rec.stop()},initSpeech:function(){var e=this,t=new window.webkitSpeechRecognition;this.rec=t,t.continuous=!0,t.interimResults=!1,t.lang="cmn-Hans-CN",t.onresult=function(t){console.log("on result"),console.log(t);var n=t.results[t.resultIndex][0],o=n.transcript,c=n.confidence;console.log("Recognised: ".concat(o)),console.log("confidence: ".concat(c)),console.log("speechOn: ".concat(e.speechOn)),"1"===e.getType?e.speechOn&&(e.addToSendList(o),e.speechOn=!1):e.addToSendList(o)},t.onstart=function(){console.log("on start"),e.status="初始化中"},t.onerror=function(){console.log("on start"),e.status="发生错误"},t.onend=function(){console.log("on end"),"1"===e.getType?t.start():e.status="未启动",e.speechOn=!1},t.onspeechstart=function(){console.log("on speech start")},t.onspeechend=function(){console.log("on speech end")},t.onosundstart=function(){console.log("on sound start")},t.onsoundend=function(){console.log("on sound end")},t.onaudiostart=function(){console.log("on audio start"),e.status="监听中..."},t.onaudioend=function(){console.log("on audio end")}},init:function(){var e=localStorage.getItem("liveSpeechSetting")||"";if(e){var t=JSON.parse(e);this.isSpeech=!!t.isSpeech,this.avatar=t.avatar||"",this.cloudSel=t.cloudSel||"googleNiang",this.appkey=t.appkey||"",this.AccessToken=t.AccessToken||"",this.voice=t.voice||"xiaoyun",this.googleVoice=t.googleVoice||"cmn-CN-Wavenet-A",this.googlePitch=Number.isNaN(Number(t.googlePitch))?0:Number(t.googlePitch),this.googleSpeakingRate=Number.isNaN(Number(t.googleSpeakingRate))?1:Number(t.googleSpeakingRate),this.azureKey=t.azureKey||"",this.azureRegion=t.azureRegion||"",this.azureVoice=t.azureVoice||"zh-CN-XiaoxiaoNeural",this.selModel=t.selModel||"LiveroiD_A-Y01"}this.avatarPre=this.avatar,this.toSocket(),this.initSpeech()}},created:function(){},mounted:function(){var e=this;this.init(),this.initTime(),this.$confirm.require({message:"点击获取权限！",header:"欢迎使用",icon:"pi pi-exclamation-triangle",acceptLabel:"确定",rejectClass:"nonoBtn",accept:function(){e.startListenAudio||e.initAudioListen()},reject:function(){e.startListenAudio||e.initAudioListen()}})},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeUnmount:function(){},unmounted:function(){},activated:function(){}};n("3061"),n("3541");qe.render=ke;var Ye=qe,Fe=[{path:"/",name:"home",component:Ye},{path:"/chat",name:"chat",component:function(){return n.e("chat").then(n.bind(null,"293a"))}},{path:"/speechcontrol",name:"SpeechControl",component:function(){return n.e("SpeechControl").then(n.bind(null,"7275"))}},{path:"/live2d",name:"Live2d",component:function(){return n.e("Live2d").then(n.bind(null,"c6d1"))}}],Ge=Object(u["a"])({history:Object(u["b"])("/"),routes:Fe}),Je=Ge,$e=n("5502"),We=Object($e["a"])({state:{},mutations:{},actions:{},modules:{}}),Xe=n("485c"),Qe=n("b24b");n("4dcb"),n("e1ae"),n("098b"),n("4121"),n("bddf");Object(o["f"])(l).use(We).use(Je).use(s["a"]).use(Xe["a"]).use(Qe["a"]).mount("#app")},"7c65":function(e,t,n){}});
//# sourceMappingURL=index.e9d81645.js.map