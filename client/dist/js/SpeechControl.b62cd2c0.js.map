{"version":3,"sources":["webpack:///./src/views/SpeechControl.vue","webpack:///./src/views/SpeechControl.vue?edf8","webpack:///./src/views/SpeechControl.vue?ae83"],"names":["class","header","name","value","getType","disabled","mouseDownFlag","getTypeChange","status","label","speechStart","speechStop","breakMessage","placeholder","message","inputIsFocus","sendByUser","components","Button","InputText","RadioButton","Panel","data","socket","keypressFlag","mounted","this","toSocket","initDocumentPress","beforeUnmount","document","removeEventListener","keydownSpeechStart","keyupSpeechStop","methods","addEventListener","event","keyCode","sendSpeechControlStatus","emit","send","connect","on","console","log","render","__scopeId"],"mappings":"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","file":"js/SpeechControl.b62cd2c0.js","sourcesContent":["<template>\r\n  <main>\r\n    <Panel header=\"语音获取\" class=\"mb15\">\r\n      <div class=\"pb15\">\r\n        <div class=\"pb10\">捕获模式：</div>\r\n        <div class=\"flex justify-content-center\">\r\n          <div class=\"mr10\">\r\n            <label\r\n              ><RadioButton\r\n                name=\"getType\"\r\n                value=\"1\"\r\n                v-model=\"getType\"\r\n                :disabled=\"mouseDownFlag\"\r\n                @change=\"getTypeChange\"\r\n              />\r\n              自由捕获</label\r\n            >\r\n          </div>\r\n          <div class=\"mr10\">\r\n            <label\r\n              ><RadioButton\r\n                name=\"getType\"\r\n                value=\"2\"\r\n                v-model=\"getType\"\r\n                :disabled=\"mouseDownFlag\"\r\n                @change=\"getTypeChange\"\r\n              />\r\n              鼠标按住</label\r\n            >\r\n          </div>\r\n          <div class=\"mr10\">\r\n            <label\r\n              ><RadioButton\r\n                name=\"getType\"\r\n                value=\"3\"\r\n                v-model=\"getType\"\r\n                :disabled=\"mouseDownFlag\"\r\n                @change=\"getTypeChange\"\r\n              />\r\n              鼠标移入</label\r\n            >\r\n          </div>\r\n          <div class=\"mr10\">\r\n            <label\r\n              ><RadioButton\r\n                name=\"getType\"\r\n                value=\"4\"\r\n                v-model=\"getType\"\r\n                :disabled=\"mouseDownFlag\"\r\n                @change=\"getTypeChange\"\r\n              />\r\n              按住空格</label\r\n            >\r\n          </div>\r\n          <div class=\"mr10\">\r\n            <label\r\n              ><RadioButton\r\n                name=\"getType\"\r\n                value=\"0\"\r\n                v-model=\"getType\"\r\n                :disabled=\"mouseDownFlag\"\r\n                @change=\"getTypeChange\"\r\n              />\r\n              禁止捕获</label\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"pb10\">状态：{{ status }}</div>\r\n      <div class=\"pb10\">\r\n        <Button\r\n          :label=\"label\"\r\n          @mousedown=\"speechStart\"\r\n          @mouseup=\"speechStop\"\r\n          :class=\"{ 'p-button-help': mouseDownFlag }\"\r\n          v-show=\"getType === '2'\"\r\n        />\r\n        <Button label=\"断句\" @click=\"breakMessage\" v-show=\"getType === '1'\" />\r\n        <Button\r\n          label=\"鼠标移入说话\"\r\n          @mouseenter=\"speechStart\"\r\n          @mouseleave=\"speechStop\"\r\n          :class=\"{ 'p-button-help': mouseDownFlag }\"\r\n          v-show=\"getType === '3'\"\r\n        />\r\n        <Button\r\n          label=\"按住空格说话\"\r\n          :class=\"{ 'p-button-help': mouseDownFlag }\"\r\n          v-show=\"getType === '4'\"\r\n        />\r\n      </div>\r\n      <div class=\"p-inputgroup\">\r\n        <InputText\r\n          placeholder=\"捕获语音\"\r\n          v-model=\"message\"\r\n          @focus=\"inputIsFocus = true\"\r\n          @blur=\"inputIsFocus = false\"\r\n        />\r\n        <Button label=\"手动发送\" @click=\"sendByUser\" />\r\n      </div>\r\n    </Panel>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport Button from 'primevue/button'\r\nimport InputText from 'primevue/inputtext'\r\nimport RadioButton from 'primevue/radiobutton'\r\nimport Panel from 'primevue/panel'\r\nimport io from 'socket.io-client'\r\n\r\nexport default {\r\n  name: 'SpeechControl',\r\n  components: {\r\n    Button,\r\n    InputText,\r\n    RadioButton,\r\n    Panel,\r\n  },\r\n  data() {\r\n    return {\r\n      label: '按住说话',\r\n      mouseDownFlag: false,\r\n      socket: null,\r\n      status: '未启动',\r\n      getType: '0',\r\n      message: '',\r\n      keypressFlag: false,\r\n      inputIsFocus: false,\r\n    }\r\n  },\r\n  mounted() {\r\n    this.toSocket()\r\n    this.initDocumentPress()\r\n  },\r\n  beforeUnmount() {\r\n    document.removeEventListener('keydown', this.keydownSpeechStart)\r\n    document.removeEventListener('keyup', this.keyupSpeechStop)\r\n  },\r\n  methods: {\r\n    initDocumentPress() {\r\n      document.addEventListener('keydown', this.keydownSpeechStart)\r\n      document.addEventListener('keyup', this.keyupSpeechStop)\r\n    },\r\n    keydownSpeechStart(event) {\r\n      if (\r\n        !this.keypressFlag &&\r\n        event.keyCode === 32 &&\r\n        !this.inputIsFocus &&\r\n        this.getType === '4'\r\n      ) {\r\n        this.speechStart()\r\n        this.keypressFlag = true\r\n      }\r\n    },\r\n    keyupSpeechStop(event) {\r\n      if (\r\n        this.keypressFlag &&\r\n        event.keyCode === 32 &&\r\n        !this.inputIsFocus &&\r\n        this.getType === '4'\r\n      ) {\r\n        this.speechStop()\r\n        this.keypressFlag = false\r\n      }\r\n    },\r\n    sendSpeechControlStatus() {\r\n      this.socket.emit('sendSpeechControlStatus', { getType: this.getType })\r\n    },\r\n    getTypeChange() {\r\n      this.sendSpeechControlStatus()\r\n    },\r\n    send(message) {\r\n      this.socket.emit('send', { message: message })\r\n    },\r\n    sendByUser() {\r\n      this.send(this.message)\r\n      this.message = ''\r\n    },\r\n    speechStart() {\r\n      this.label = '松开闭麦'\r\n      this.mouseDownFlag = true\r\n      this.socket.emit('controlSpeech', true)\r\n    },\r\n    speechStop() {\r\n      this.label = '按住说话'\r\n      this.mouseDownFlag = false\r\n      this.socket.emit('controlSpeech', false)\r\n    },\r\n    breakMessage() {\r\n      this.socket.emit('controlSpeech', false)\r\n    },\r\n    toSocket() {\r\n      this.socket = io.connect('/socketchat')\r\n      this.socket.on('connect', () => {\r\n        console.log('已连接')\r\n        this.socket.emit('wantHomeStatus')\r\n        this.socket.on('getHomeStatus', (data) => {\r\n          this.status = data.status\r\n          this.getType = data.getType\r\n        })\r\n      })\r\n      this.socket.on('disconnect', () => {\r\n        console.log('已断开')\r\n      })\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nmain {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  padding: 15px 30px;\r\n  text-align: center;\r\n  text-transform: uppercase;\r\n  width: 100%;\r\n}\r\n</style>\r\n","import { render } from \"./SpeechControl.vue?vue&type=template&id=55cdc725&scoped=true\"\nimport script from \"./SpeechControl.vue?vue&type=script&lang=js\"\nexport * from \"./SpeechControl.vue?vue&type=script&lang=js\"\n\nimport \"./SpeechControl.vue?vue&type=style&index=0&id=55cdc725&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-55cdc725\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SpeechControl.vue?vue&type=style&index=0&id=55cdc725&scoped=true&lang=css\""],"sourceRoot":""}